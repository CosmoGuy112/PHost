# Memory

### Commands to Check Memory Use in Linux

## Free Command ที่ใช้แสดง  Amount of Physical and Swap Memory

```bash
  $free
```

**` free `** แสดงข้อมูลเกี่ยวกับการใช้หน่วยความจำในระบบ เช่น หน่วยความจำทั้งหมด, หน่วยความจำที่ใช้งาน, หน่วยความจำที่ว่าง, การใช้งานหน่วยความจำแบบเคลื่อนที่, และหน่วยความจำแคช.

- ` free -h `
แสดงผลลัพธ์ในรูปแบบที่เป็นมนุษย์อ่านได้ (ในหน่วยความจำตามขนาดของข้อมูล).

- ` free -m  ` จะแสดงข้อมูลในหน่วยเป็นเมกะไบต์ (MB) เพื่อความสะดวกในการอ่าน

- ` free -b ` คำสั่งนี้จะแสดงข้อมูลการใช้งานหน่วยความจำในหน่วยไบต์ (bytes) ที่ไม่ถูกจำกัดโดยการแสดงผลเป็นตัวเลขจำนวนเต็มเท่านั้น หน่วยความจำที่แสดงจะเป็นข้อมูลในรูปแบบที่ไม่มีการเปลี่ยนแปลงขนาดหน่วยความจำ

- ` free -g `
คำสั่งนี้จะแสดงข้อมูลการใช้งานหน่วยความจำในหน่วยเป็นเกีบไบต์ (GB) เพื่อความสะดวกในการอ่าน

- ` free -t ` แสดงผลรวมของหน่วยความจำทั้งหมดที่ใช้งานทั้ง Ram และ Swap

- ` free -s [delay] ` อัปเดตผลลัพธ์ทุก [delay] วินาที

- `c [count]` อัปเดตผลลัพธ์ทั้งหมด [count] ครั้ง

| Name             |   description                                                       |
| ----------------- | ------------------------------------------------------------------ |
| total  | หน่วยความจำที่ติดตั้งทั้งหมด |
| used  | หน่วยความจำที่ใช้งานอยู่ในปัจจุบันโดยกระบวนการที่รันอยู่ (used= total – free – buff/cache) |
| free  | หน่วยความจำที่ไม่ได้ใช้ (free= total – used – buff/cache)|
| shared  | หน่วยความจำที่ใช้ร่วมกัน |
| buffers  | หน่วยความจำที่ระบบปฏิบัติการสงวนไว้เพื่อจัดสรรเป็นบัฟเฟอร์เมื่อกระบวนการต้องการ |
| cached  | ไฟล์ที่ใช้ล่าสุดจัดเก็บไว้ใน Ram |
| buff/cache  | Buffers + Cache |
| available  | การประมาณจำนวนหน่วยความจำที่พร้อมใช้งานสำหรับการเริ่มแอปพลิเคชันใหม่โดยไม่ต้องสลับ |


## Cat Command ที่แสดง Linux Memory Information
```bash
  $/proc/meminfo
```

- จะแสดงข้อมูลเกี่ยวกับการใช้หน่วยความจำในระบบจากไฟ `/proc/meminfo`
ซึ่งรวมถึงข้อมูลเกี่ยวกับหน่วยความจำทั้งหมด, หน่วยความจำที่ใช้งาน, และข้อมูลอื่น ๆ เกี่ยวกับการใช้หน่วยความจำ

## vmstat Command รายงาน Virtual Memory Statistics
```bash
  vmstat
```

จะแสดงข้อมูลเกี่ยวกับการใช้หน่วยความจำในระบบจากไฟ `/proc/meminfo`
ซึ่งรวมถึงข้อมูลเกี่ยวกับหน่วยความจำทั้งหมด, หน่วยความจำที่ใช้งาน, และข้อมูลอื่น ๆ เกี่ยวกับการใช้หน่วยความจำ
...........................


## Commands to Delete cache in Linux

```bash
  $ sysctl vm.drop_caches=3
```
- คำสั่ง  `vm.drop_caches=3` ใช้ในการลบข้อมูลแคช (cache) ของหน่วยความจำ (RAM) ในระบบ Linux ซึ่งจะส่งผลให้ข้อมูลในแคชทั้งหมดถูกลบออกจากระบบ ค่า "3" ในการกำหนดค่าให้กับ vm.drop_caches หมายถึงการลบข้อมูลแคชทั้งหมด ซึ่งรวมถึง buffer cache, page cache, และ slab cache ทั้งหมด
- การลบข้อมูลแคชเป็นเครื่องมือที่มีประโยชน์ในบางกรณี เช่น เมื่อต้องการปล่อยหน่วยความจำเพิ่มเติมที่ถูกใช้งานโดยแคช หรือเมื่อต้องการล้างข้อมูลที่ไม่จำเป็นออกจากระบบเพื่อเพิ่มประสิทธิภาพการทำงานของระบบในบางกรณี เช่น เมื่อมีการทดสอบประสิทธิภาพของระบบ หรือต้องการความสมดุลในการใช้งานหน่วยความจำ
- ควรใช้คำสั่ง sysctl vm.drop_caches=3 ด้วยความระมัดระวังเนื่องจากการลบข้อมูลแคชอาจทำให้ระบบช้าลงชั่วคราวในขณะที่ระบบต้องทำการโหลดข้อมูลใหม่เข้าสู่แคชอีกครั้ง และอาจส่งผลให้การทำงานของแอปพลิเคชันหรือระบบที่ได้รับผลกระทบต่าง ๆ อาจเป็นไปได้ ดังนั้นควรใช้คำสั่งนี้โดยคำนึงถึงความเหมาะสมและการจำเป็นของการลบแคชในสถานการณ์ของระบบ
